{% extends 'base.html' %}
{% load static %}

{% block title %}–î–µ—Ç–∞–ª–∏ –∑–∞–º–µ—Ä–∞ - Engine View{% endblock %}

{% block extra_head %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    .param-card {
        transition: transform 0.2s;
    }
    .param-card:hover {
        transform: translateY(-2px);
    }
    .chart-container {
        position: relative;
        height: 300px;
        width: 100%;
    }
</style>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="breadcrumb-item"><a href="{% url 'monitoring:measurement_list' %}">–î–∞–Ω–Ω—ã–µ</a></li>
                <li class="breadcrumb-item active">–î–µ—Ç–∞–ª–∏ –∑–∞–º–µ—Ä–∞</li>
            </ol>
        </nav>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>üìä –î–µ—Ç–∞–ª–∏ –∑–∞–º–µ—Ä–∞</h1>
            <a href="{% url 'monitoring:measurement_list' %}" class="btn btn-outline-secondary">
                ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
            </a>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card param-card">
                    <div class="card-header bg-primary text-white">
                        <h6 class="mb-0">üõ≥Ô∏è –°—É–¥–Ω–æ</h6>
                    </div>
                    <div class="card-body text-center">
                        <h4>–¢–∞–Ω–∫–µ—Ä-1</h4>
                        <p class="text-muted mb-0">IMO: 9876543</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card param-card">
                    <div class="card-header bg-success text-white">
                        <h6 class="mb-0">‚öôÔ∏è –î–≤–∏–≥–∞—Ç–µ–ª—å</h6>
                    </div>
                    <div class="card-body text-center">
                        <h4>–ì–ª–∞–≤–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å</h4>
                        <p class="text-muted mb-0">–°–µ—Ä–∏—è: MAN B&W</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card param-card">
                    <div class="card-header bg-info text-white">
                        <h6 class="mb-0">üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</h6>
                    </div>
                    <div class="card-body text-center">
                        <h4>15.09.2024</h4>
                        <p class="text-muted mb-0">14:30:45</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="row mb-4">
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="mb-0">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="temperatureChart"></canvas>
                        </div>
                        <div class="text-center mt-3">
                            <span class="badge bg-success fs-6">85.2 ¬∞C</span>
                            <small class="text-muted d-block mt-1">–ù–æ—Ä–º–∞: 70-90 ¬∞C</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="mb-0">üìä –î–∞–≤–ª–µ–Ω–∏–µ</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="pressureChart"></canvas>
                        </div>
                        <div class="text-center mt-3">
                            <span class="badge bg-warning fs-6">12.5 –±–∞—Ä</span>
                            <small class="text-muted d-block mt-1">–ù–æ—Ä–º–∞: 11-13 –±–∞—Ä</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="mb-0">üîÑ –û–±–æ—Ä–æ—Ç—ã</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="rpmChart"></canvas>
                        </div>
                        <div class="text-center mt-3">
                            <span class="badge bg-info fs-6">1250 –æ–±/–º–∏–Ω</span>
                            <small class="text-muted d-block mt-1">–ù–æ—Ä–º–∞: 1000-1400 –æ–±/–º–∏–Ω</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 mb-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="mb-0">üìà –°—Ç–∞—Ç—É—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="statusChart"></canvas>
                        </div>
                        <div class="text-center mt-3">
                            <span class="badge bg-success fs-6">–ù–æ—Ä–º–∞</span>
                            <small class="text-muted d-block mt-1">–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìã –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–º–µ—Ä–∞</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead class="table-dark">
                            <tr>
                                <th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                                <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                                <th>–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–ù–æ—Ä–º–∞</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ—Ö–ª–∞–∂–¥–∞—é—â–µ–π –∂–∏–¥–∫–æ—Å—Ç–∏</td>
                                <td>85.2</td>
                                <td>¬∞C</td>
                                <td><span class="badge bg-success">–ù–æ—Ä–º–∞</span></td>
                                <td>70-90 ¬∞C</td>
                            </tr>
                            <tr>
                                <td>–î–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å–ª–∞</td>
                                <td>12.5</td>
                                <td>–±–∞—Ä</td>
                                <td><span class="badge bg-success">–ù–æ—Ä–º–∞</span></td>
                                <td>11-13 –±–∞—Ä</td>
                            </tr>
                            <tr>
                                <td>–û–±–æ—Ä–æ—Ç—ã –¥–≤–∏–≥–∞—Ç–µ–ª—è</td>
                                <td>1250</td>
                                <td>–æ–±/–º–∏–Ω</td>
                                <td><span class="badge bg-success">–ù–æ—Ä–º–∞</span></td>
                                <td>1000-1400 –æ–±/–º–∏–Ω</td>
                            </tr>
                            <tr>
                                <td>–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞</td>
                                <td>245</td>
                                <td>–ª/—á</td>
                                <td><span class="badge bg-warning">–í–Ω–∏–º–∞–Ω–∏–µ</span></td>
                                <td>200-230 –ª/—á</td>
                            </tr>
                            <tr>
                                <td>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤—ã—Ö–ª–æ–ø–Ω—ã—Ö –≥–∞–∑–æ–≤</td>
                                <td>320</td>
                                <td>¬∞C</td>
                                <td><span class="badge bg-success">–ù–æ—Ä–º–∞</span></td>
                                <td>300-350 ¬∞C</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // –î–µ–º–æ-–≥—Ä–∞—Ñ–∏–∫–∏
    document.addEventListener('DOMContentLoaded', function() {
        // –ì—Ä–∞—Ñ–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
        new Chart(document.getElementById('temperatureChart'), {
            type: 'line',
            data: {
                labels: ['10:00', '11:00', '12:00', '13:00', '14:00', '14:30'],
                datasets: [{
                    label: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)',
                    data: [78, 82, 80, 83, 84, 85.2],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // –ì—Ä–∞—Ñ–∏–∫ –¥–∞–≤–ª–µ–Ω–∏—è
        new Chart(document.getElementById('pressureChart'), {
            type: 'line',
            data: {
                labels: ['10:00', '11:00', '12:00', '13:00', '14:00', '14:30'],
                datasets: [{
                    label: '–î–∞–≤–ª–µ–Ω–∏–µ (–±–∞—Ä)',
                    data: [11.8, 12.0, 12.2, 12.3, 12.4, 12.5],
                    borderColor: '#0d6efd',
                    backgroundColor: 'rgba(13, 110, 253, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // –ì—Ä–∞—Ñ–∏–∫ –æ–±–æ—Ä–æ—Ç–æ–≤
        new Chart(document.getElementById('rpmChart'), {
            type: 'line',
            data: {
                labels: ['10:00', '11:00', '12:00', '13:00', '14:00', '14:30'],
                datasets: [{
                    label: '–û–±–æ—Ä–æ—Ç—ã (–æ–±/–º–∏–Ω)',
                    data: [1180, 1200, 1220, 1230, 1240, 1250],
                    borderColor: '#20c997',
                    backgroundColor: 'rgba(32, 201, 151, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false
            }
        });

        // –ì—Ä–∞—Ñ–∏–∫ —Å—Ç–∞—Ç—É—Å–∞
        new Chart(document.getElementById('statusChart'), {
            type: 'doughnut',
            data: {
                labels: ['–ù–æ—Ä–º–∞', '–í–Ω–∏–º–∞–Ω–∏–µ', '–ö—Ä–∏—Ç–∏—á–Ω–æ'],
                datasets: [{
                    data: [85, 10, 5],
                    backgroundColor: ['#198754', '#ffc107', '#dc3545']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%'
            }
        });
    });
</script>
{% endblock %}